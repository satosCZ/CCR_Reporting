@*@model IEnumerable<Project_REPORT_v7.Models.MainTaskTable>*@
@model PagedList.IPagedList<Project_REPORT_v7.Models.MainTaskTable>
@using PagedList.Mvc;

@*@{
    ViewBag.Title = "FilterIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}*@

<script>
    $(function () {
        $("#radioMT input").checkboxradio({
            icon: false
        });
        mtFrom = $("#mtFromDT")
            .datepicker({
                defaultDate: "",
                changeMonth: true,
                numberOfMonths: 1,
                dateFormat: "dd.mm.yy"
            })
            .on("change", function () {
                mtTo.datepicker("option", "minDate", getDate(this));
            }),
            mtTo = $("#mtToDT").datepicker({
                changeMonth: true,
                numberOfMonths: 1,
                dateFormat: "dd.mm.yy"
            })
                .on("change", function () {
                    mtFrom.datepicker("option", "maxDate", getDate(this));
                });

        function getDate(element) {
            var date;
            try {
                date = $.datepicker.parseDate(dateFormat, element.value);
            } catch (error) {
                date = null;
            }
            return date;
        }
    });
</script>

<div>
    

    <br />
    <div @*id="tab_MainTask"*@>
        <table class="table table-responsive table-striped table-condensed table-hover">
            <tr>
                <th class="text-center">
                    @Html.DisplayName("Date")
                </th>
                <th class="text-center">
                    @Html.DisplayName("Shift")
                </th>
                <th class="text-center">
                    @Html.DisplayName("CCR")
                </th>
                <th class="text-center">
                    @Html.DisplayName("Office")
                </th>
                <th class="text-center">
                    @Html.DisplayName("Time")
                </th>
                <th class="text-center">
                    @Html.DisplayName("Shop")
                </th>
                <th class="text-center">
                    @Html.DisplayName("System")
                </th>
                <th class="text-center col-md-3">
                    @Html.DisplayName("What happened")
                </th>
                <th class="text-center col-md-4">
                    @Html.DisplayName("How it was solved")
                </th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td class="text-center">
                        @Html.DisplayFor(modelItem => item.ReportTable.Date)
                    </td>
                    <td class="text-center">
                        @Html.DisplayFor(modelItem => item.ReportTable.Shift[0])
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ReportTable.MembersTable.FirstName[0]). @Html.DisplayFor(modelItem => item.ReportTable.MembersTable.LastName) <br />
                        @Html.DisplayFor(modelItem => item.ReportTable.MembersTable1.FirstName[0]). @Html.DisplayFor(modelItem => item.ReportTable.MembersTable1.LastName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Cooperation)
                    </td>
                    <td class="text-center">
                        @Html.DisplayFor(modelItem => item.Duration)
                    </td>
                    <td class="text-center">
                        @Html.DisplayFor(modelItem => item.Shop)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.System)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Problem)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Solution)
                    </td>
                </tr>
            }

        </table>

        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

        @Html.PagedListPager(Model, mtPage => Url.Action("FilterIndex", new { mtPage }), PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new AjaxOptions() { HttpMethod = "GET", UpdateTargetId = "tab_MainTask", InsertionMode = InsertionMode.ReplaceWith }))
    </div>
</div>